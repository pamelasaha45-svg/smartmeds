<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartMeds - Dashboard</title>
    <link rel="stylesheet" href="styles.css">

    <!-- Firebase Libraries -->
    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-auth.js"></script>
</head>
<body>

    <div class="app-container" id="app-container" style="display:none;">

        <!-- HEADER -->
        <header class="header">
            <div class="header-left">
                <img src="smartmeds-logo.jpg" class="logo" alt="Logo">
                <h1>SmartMeds</h1>
            </div>

            <nav class="nav-menu">
                <a href="#" class="nav-link active" data-page="dashboard">Dashboard</a>
                <a href="#" class="nav-link" data-page="medicines">Medicines</a>
                <a href="#" class="nav-link" data-page="reminders">Reminders</a>
                <a href="#" class="nav-link" data-page="family">Family & Doctors</a>
                <a href="#" class="nav-link" data-page="profile">Profile</a>
            </nav>

            <div class="header-right">
                <div class="user-menu">
                    <div class="user-avatar" id="user-avatar">U</div>
                    <div class="dropdown-menu">
                        <button id="logout-btn" class="logout-btn">Logout</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- DASHBOARD PAGE -->
        <div id="dashboard" class="page active">
            <div class="page-header">
                <h2>Dashboard</h2>
                <p>Welcome back, <span id="dashboard-username">User</span>!</p>
            </div>

            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">
                        <h3>Today's Medicines</h3>
                    </div>
                    <div id="today-medicines" class="medicines-list">
                        <p class="empty-state">No medicines added yet</p>
                    </div>
                </div>

                <div class="card">
                    <h3>Quick Stats</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-label">Total Medicines</span>
                            <span class="stat-value" id="total-medicines">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Family Members</span>
                            <span class="stat-value" id="total-family">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Doctors</span>
                            <span class="stat-value" id="total-doctors">0</span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3>Upcoming Reminders</h3>
                    </div>
                    <div id="upcoming-reminders" class="reminders-list">
                        <p class="empty-state">No reminders yet</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3>Family & Doctors</h3>
                    </div>
                    <div id="dashboard-contacts" class="contacts-list">
                        <p class="empty-state">No contacts added yet</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Other pages are controlled from JS -->
        <div id="medicines" class="page"></div>
        <div id="reminders" class="page"></div>
        <div id="family" class="page"></div>
        <div id="profile" class="page"></div>

    </div>

    <script src="app.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAMyzabZU5viAxaOg-uIwMZmYMDsgO71Ss",
            authDomain: "smartmeds-1.firebaseapp.com",
            projectId: "smartmeds-1",
            storageBucket: "smartmeds-1.firebasestorage.app",
            messagingSenderId: "169671530750",
            appId: "1:169671530750:web:7e6292d0c34a8cf3edadaf"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // Block dashboard if not logged in
        auth.onAuthStateChanged(user => {
            if (!user) {
                window.location.href = "signin.html";
            } else {
                document.getElementById("dashboard-username").innerText = user.displayName || "User";
                document.getElementById("app-container").style.display = "flex";
            }
        });
    </script>

</body>
</html>
